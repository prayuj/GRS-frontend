(this.webpackJsonpgamerent=this.webpackJsonpgamerent||[]).push([[0],{102:function(e,t,a){e.exports=a(207)},107:function(e,t,a){},189:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),l=a.n(s),o=(a(107),a(4)),i=a(5),m=a(1),c=a(7),u=a(6),d=a(10),h=a(30),g=(a(108),a(101)),p=function(e){var t=e.component,a=Object(g.a)(e,["component"]);return r.a.createElement(h.b,Object.assign({},a,{render:function(e){return localStorage.getItem("isLoggedIn")?r.a.createElement(t,e):r.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},v=a(29),f=a(212),E=a(215),b=a(214),y=a(213),_=a(2),S=a.n(_),C=a(100),N=a.n(C),O=function(){return r.a.createElement(N.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))},k=a(15),D=a.n(k),j=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(v.a)({},e.target.id,e.target.value))},n.renderRedirect=function(){if(n.state.redirect)return r.a.createElement(h.a,{push:!0,to:"/"})},localStorage.removeItem("isLoggedIn"),n.state={email:"",password:"",redirect:!1,login_validating:!1},n.handleLogin=n.handleLogin.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({login_validating:!0}),S.a.post("https://prayuj-gamerent.herokuapp.com/login/",{email:e.target.email.value,password:e.target.password.value}).then((function(e){e.data.isLoggedIn?(localStorage.setItem("isLoggedIn",e.data.isLoggedIn),t.setState({redirect:!0}),t.props.onSubmit()):alert("Wrong Password"),t.setState({login_validating:!1})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Login",style:{margin:"1em"}},this.renderRedirect(),r.a.createElement("h1",{style:{textAlign:"center"}},"Login to Continue"),r.a.createElement("form",{onSubmit:this.handleLogin},r.a.createElement(f.a,{controlId:"email",bsSize:"large"},r.a.createElement(E.a,null,"Email"),r.a.createElement(b.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(f.a,{controlId:"password",bsSize:"large"},r.a.createElement(E.a,null,"Password"),r.a.createElement(b.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),this.state.login_validating?r.a.createElement(y.a,{block:!0,bsSize:"large",disabled:!0},r.a.createElement(O,null)):r.a.createElement(y.a,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit"},"Login"),r.a.createElement(D.a,{style:{margin:"1em"}},r.a.createElement(D.a.Body,null,"Email: prayuj@gmail.com",r.a.createElement("br",null),"Password: hello"))))}}]),a}(n.Component),I=(a(137),a(166),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){console.log("Test"),n.setState({redirect:!0})},n.renderRedirect=function(){if(n.state.redirect)return r.a.createElement(h.a,{push:!0,to:"/customer/"+n.state.id})},console.log(e),"customers"==e.mode&&(n.state={display:"customers",id:e.id,sr:e.sr,name:e.name,email:e.email,noOfGames:e.noOfGames,dateOfJoin:e.dateOfJoin,dateOfMembershipEnd:e.dateOfMembershipEnd}),"dashboard"==e.mode&&(n.state={display:"dashboard",id:e.id,sr:e.sr,name:e.name,email:e.email,dateEnding:e.dateEnding}),n.setRedirect=n.setRedirect.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){"customers"==e.mode&&this.setState({display:"customers",id:e.id,sr:e.sr,name:e.name,email:e.email,noOfGames:e.noOfGames,dateOfJoin:e.dateOfJoin,dateOfMembershipEnd:e.dateOfMembershipEnd}),"dashboard"==e.mode&&this.setState({display:"dashboard",id:e.id,sr:e.sr,name:e.name,email:e.email,dateEnding:e.dateEnding})}},{key:"render",value:function(){return"customers"===this.state.display?r.a.createElement("tr",{onClick:this.setRedirect,id:this.state.id,className:"items"},this.renderRedirect(),r.a.createElement("td",null,this.state.sr),r.a.createElement("td",null,this.state.name),r.a.createElement("td",null,this.state.email),r.a.createElement("td",null,this.state.dateOfJoin),r.a.createElement("td",null,this.state.dateOfMembershipEnd),r.a.createElement("td",null,this.state.noOfGames)):"dashboard"===this.state.display?r.a.createElement("tr",{onClick:this.setRedirect,id:this.state.id,className:"items"},this.renderRedirect(),r.a.createElement("td",null,this.state.sr),r.a.createElement("td",null,this.state.name),r.a.createElement("td",null,this.state.email),r.a.createElement("td",null,this.state.dateEnding)):void 0}}]),a}(n.Component)),R=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){n.setState({redirect:!0})},n.renderRedirect=function(){if(n.state.redirect)return r.a.createElement(h.a,{push:!0,to:"/add_game/"})},n.state={games:[],filtered:[],ascendingName:!0,ascendingAvailable:!0,nameSortButtonValue:r.a.createElement("span",null,"\u2193"),availableSortButtonValue:"Sort",games_loaded:!1},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.onClickForSort=n.onClickForSort.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getGames()}},{key:"getGames",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/game/").then((function(t){e.setState({games:t.data,filtered:t.data,games_loaded:!0})}))}},{key:"handleChange",value:function(e){var t=[];""!==e.target.value?(console.log("HERE 1"),t=this.state.games.filter((function(t){var a=t.name.toLowerCase(),n=e.target.value.toLowerCase();return a.includes(n)})),console.log(t)):(console.log("HERE 2"),t=this.state.games),this.setState({filtered:t})}},{key:"onClickForSort",value:function(e){var t=this;if(console.log(e.target.value),"Name"===e.target.value){var a=this.state.games;a.sort((function(e,a){var n=e.name.toLowerCase(),r=a.name.toLowerCase();return t.state.ascendingName?n<r?1:n>r?-1:0:t.state.ascendingName?void 0:n<r?-1:n>r?1:0})),console.log(a);var n=this.state.ascendingName?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({games:a,ascendingName:!this.state.ascendingName,nameSortButtonValue:n,availableSortButtonValue:"Sort"})}if("Available"===e.target.value){var s=this.state.games;s.sort((function(e,a){var n=e.numberAvailable,r=a.numberAvailable;return t.state.ascendingAvailable?n<r?1:n>r?-1:0:t.state.ascendingAvailable?void 0:n<r?-1:n>r?1:0})),console.log(s);var l=this.state.ascendingAvailable?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({games:s,ascendingAvailable:!this.state.ascendingAvailable,availableSortButtonValue:l,nameSortButtonValue:"Sort"})}}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderRedirect(),r.a.createElement("input",{type:"button",className:"btn btn-primary",value:"Add Game",onClick:this.setRedirect}),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search...",onChange:this.handleChange}),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{paddingBottom:"1.3%"}},"Sr"),r.a.createElement("th",null,"Name",r.a.createElement("button",{className:"btn btn-primary",value:"Name",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.nameSortButtonValue)),r.a.createElement("th",{style:{paddingBottom:"1.3%"}},"Available In"),r.a.createElement("th",null,"Number Available"," ",r.a.createElement("button",{className:"btn btn-primary",value:"Available",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.availableSortButtonValue)))),r.a.createElement("tbody",null,this.state.games_loaded?this.state.filtered.map((function(e,t){return r.a.createElement(G,{mode:"games",_id:e._id,sr:t+1,name:e.name,availableIn:e.numberPS4Available>0?e.numberXBOXAvailable>0?["PS4","XBOX One"]:["PS4"]:e.numberXBOXAvailable>0?["XBOX One"]:["Not Available"],noAvailable:e.numberAvailable})})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))))))}}]),a}(n.Component),G=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){"games"===n.state.mode?n.setState({redirect_to_game:!0}):"issue"!==n.state.mode&&"return"!==n.state.mode||n.setState({redirect_to_transaction:!0})},n.renderRedirect=function(){return n.state.redirect_to_game?r.a.createElement(h.a,{push:!0,to:"/game/"+n.state._id}):n.state.redirect_to_transaction?r.a.createElement(h.a,{push:!0,to:"/transaction/"+n.state._id}):void 0},console.log(e),"games"==e.mode&&(n.state={mode:"games",_id:e._id,sr:e.sr,name:e.name,availableIn:e.availableIn,status:e.status,noAvailable:e.noAvailable,redirect:!1}),"issue"==e.mode&&(n.state={mode:"issue",_id:e._id,cust_name:e.cust_name,sr:e.sr,name:e.name,dateIssue:e.dateIssue,redirect:!1}),"return"==e.mode&&(n.state={mode:"return",_id:e._id,sr:e.sr,name:e.name,cust_name:e.cust_name,dateIssue:e.dateIssue,dateReturn:e.dateReturn,redirect:!1}),n.setRedirect=n.setRedirect.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){console.log(e.mode.display),"games"==e.mode&&this.setState({mode:"games",_id:e._id,sr:e.sr,name:e.name,availableIn:e.availableIn,status:e.status,noAvailable:e.noAvailable,redirect:!1}),"dashboard"==e.mode&&this.setState({display:"dashboard",id:e.id,sr:e.sr,name:e.name,email:e.email,dateOfJoin:e.dateOfJoin})}},{key:"render",value:function(){return"games"===this.state.mode?r.a.createElement("tr",{onClick:this.setRedirect,id:this.state._id,className:"items"},this.renderRedirect(),r.a.createElement("td",null,this.state.sr),r.a.createElement("td",null,this.state.name),r.a.createElement("td",null,this.state.availableIn.map((function(e){return e+" "}))),r.a.createElement("td",null,this.state.noAvailable)):"issue"===this.state.mode?r.a.createElement("tr",{onClick:this.setRedirect,id:this.state._id,className:"items"},this.renderRedirect(),r.a.createElement("td",null,this.state.sr),r.a.createElement("td",null,this.state.name),r.a.createElement("td",null,this.state.cust_name),r.a.createElement("td",null,this.state.dateIssue)):"return"===this.state.mode?r.a.createElement("tr",{onClick:this.setRedirect,id:this.state._id,className:"items"},this.renderRedirect(),r.a.createElement("td",null,this.state.sr),r.a.createElement("td",null,this.state.name),r.a.createElement("td",null,this.state.cust_name),r.a.createElement("td",null,this.state.dateIssue),r.a.createElement("td",null,this.state.dateReturn)):void 0}}]),a}(n.Component),w=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={customers:[],issue_game:[],return_game:[],search:"",dateFrom:"",dateTo:"",CustomersAdded:0,MembershipEnding:0,GamesIssued:0,GamesReturn:0,message:"Today",issue_game_loaded:!1,return_game_loaded:!1,customers_loaded:!1},n.getDetails=n.getDetails.bind(Object(m.a)(n)),n.getCustomers=n.getCustomers.bind(Object(m.a)(n)),n.getIssuedGames=n.getIssuedGames.bind(Object(m.a)(n)),n.getReturnedGames=n.getReturnedGames.bind(Object(m.a)(n)),n.getDashboardDetails=n.getDashboardDetails.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getDetails(),this.getCustomers(),this.getIssuedGames(),this.getReturnedGames()}},{key:"getDetails",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/customer/CustomersAdded/from="+this.getToday()+"&to="+this.getToday()).then((function(t){e.setState({CustomersAdded:t.data.CustomersAdded})})),S.a.get("https://prayuj-gamerent.herokuapp.com/customer/MembershipEnding/from="+this.getToday()+"&to="+this.getToday()).then((function(t){e.setState({MembershipEnding:t.data.MembershipEnding})})),S.a.get("https://prayuj-gamerent.herokuapp.com/game/GamesIssued/from="+this.getToday()+"&to="+this.getToday()).then((function(t){e.setState({GamesIssued:t.data.GamesIssued})})),S.a.get("https://prayuj-gamerent.herokuapp.com/game/GamesReturn/from="+this.getToday()+"&to="+this.getToday()).then((function(t){e.setState({GamesReturn:t.data.GamesReturn})}))}},{key:"getCustomers",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/customer/dashboard").then((function(t){e.setState({customers:t.data,customers_loaded:!0})}))}},{key:"getIssuedGames",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/game/dashboard/issue").then((function(t){console.log(t.data),e.setState({issue_game:t.data,issue_game_loaded:!0})}))}},{key:"getReturnedGames",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/game/dashboard/return").then((function(t){console.log(t.data),e.setState({return_game:t.data,return_game_loaded:!0})}))}},{key:"convertDate",value:function(e){var t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=parseInt(t.getMonth()),r=t.getFullYear(),s=a+"/"+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n]+"/"+r;return console.log(s),s}},{key:"getToday",value:function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+a+"-"+t}},{key:"getDashboardDetails",value:function(e){var t=this;e.preventDefault(),""!==e.target.from.value&&""!==e.target.to.value&&(S.a.get("https://prayuj-gamerent.herokuapp.com/customer/CustomersAdded/from="+e.target.from.value+"&to="+e.target.to.value).then((function(e){t.setState({CustomersAdded:e.data.CustomersAdded})})),S.a.get("https://prayuj-gamerent.herokuapp.com/customer/MembershipEnding/from="+e.target.from.value+"&to="+e.target.to.value).then((function(e){t.setState({MembershipEnding:e.data.MembershipEnding})})),S.a.get("https://prayuj-gamerent.herokuapp.com/game/GamesIssued/from="+e.target.from.value+"&to="+e.target.to.value).then((function(e){t.setState({GamesIssued:e.data.GamesIssued})})),S.a.get("https://prayuj-gamerent.herokuapp.com/game/GamesReturn/from="+e.target.from.value+"&to="+e.target.to.value).then((function(e){t.setState({GamesReturn:e.data.GamesReturn})})),this.state.dateFrom===this.state.dateTo?this.state.dateFrom===this.getToday()?this.setState({message:"Today"}):this.setState({message:"on "+this.convertDate(this.state.dateTo)+" "}):this.setState({message:"from "+this.convertDate(this.state.dateFrom)+" to "+this.convertDate(this.state.dateTo)+" "}))}},{key:"render",value:function(){var e=this;return""!=this.state.dateFrom&&""!=this.state.dateTo&&(this.state.dateFrom===this.state.dateTo?"on "+this.convertDate(this.state.dateTo)+" ":"from "+this.convertDate(this.state.dateFrom)+" to "+this.convertDate(this.state.dateTo)+" "),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.getDashboardDetails},"Select Dates",r.a.createElement("input",{name:"from",type:"date",value:this.state.dateFrom,max:this.getToday(),onChange:function(t){return e.setState({dateFrom:t.target.value})}}),"to",r.a.createElement("input",{name:"to",type:"date",value:this.state.dateTo,min:this.state.dateFrom,max:this.getToday(),onChange:function(t){return e.setState({dateTo:t.target.value})}}),r.a.createElement("input",{type:"submit",className:"btn btn-info",value:"Get"})),r.a.createElement("h4",null,this.state.CustomersAdded+" ","Customers Added ",this.state.message),r.a.createElement("h4",null,this.state.MembershipEnding+" ","Customers Membership Ending ",this.state.message),r.a.createElement("h4",null,this.state.GamesIssued+" ","Games Issued ",this.state.message),r.a.createElement("h4",null,this.state.GamesReturn+" ","Games Returned ",this.state.message)),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("h3",null,"Recently Issued Games"),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Issued To"),r.a.createElement("th",null,"Date Of Issue"))),r.a.createElement("tbody",null,this.state.issue_game_loaded?this.state.issue_game.map((function(t,a){return r.a.createElement(G,{mode:"issue",_id:t._id,sr:a+1,name:t.gameInfo.name,cust_name:t.customerInfo.name,dateIssue:e.convertDate(t.date_issue)})})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("h3",null,"Recently Returned Games"),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Returned By"),r.a.createElement("th",null,"Date Of Issue"),r.a.createElement("th",null,"Date Of Return"))),r.a.createElement("tbody",null,this.state.return_game_loaded?this.state.return_game.map((function(t,a){return r.a.createElement(G,{mode:"return",_id:t._id,sr:a+1,name:t.gameInfo.name,cust_name:t.customerInfo.name,dateIssue:e.convertDate(t.date_issue),dateReturn:e.convertDate(t.date_return)})})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("h3",null,"Membership Ending Soon"),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20,padding:"2px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email-ID"),r.a.createElement("th",null,"Date Ending"))),r.a.createElement("tbody",null,this.state.customers_loaded?this.state.customers.map((function(t,a){return r.a.createElement(I,{mode:"dashboard",id:t._id,sr:a+1,name:t.name,email:t.email,dateEnding:e.convertDate(t.latestMembership.end)})})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null))))))))}}]),a}(n.Component),B=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){n.setState({redirect:!0})},n.renderRedirect=function(){if(n.state.redirect)return r.a.createElement(h.a,{push:!0,to:"/add_customer/"})},n.state={customers:[],search:"",filtered:[],ascendingName:!0,ascendingDOJ:!0,ascendingMembershipEnd:!0,ascendingNoOfGames:!0,nameSortButtonValue:"Sort",DOJSortButtonValue:"Sort",membershipEndSortButtonValue:r.a.createElement("span",null,"\u2193"),noOfGamesSortButtonValue:"Sort",customers_loaded:!1},n.getCustomers=n.getCustomers.bind(Object(m.a)(n)),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.onClickForSort=n.onClickForSort.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCustomers()}},{key:"getCustomers",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/customer/").then((function(t){e.setState({customers:t.data,filtered:t.data,customers_loaded:!0})}))}},{key:"convertDate",value:function(e){var t=new Date(e);return String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear()}},{key:"handleChange",value:function(e){var t=[],a=[];if(""!==e.target.value){var n,r=[];r=(t=this.state.customers).filter((function(t){var a=t.name.toLowerCase(),n=e.target.value.toLowerCase();return a.includes(n)})),n=t.filter((function(t){var a=t.name.toLowerCase(),n=e.target.value.toLowerCase();return a.includes(n)}));for(var s=0;s<n.length;s++){for(var l=!0,o=0;o<r.length;o++)JSON.stringify(n[s])===JSON.stringify(r[o])&&(l=!1);l&&r.push(n[s])}a=r}else console.log("HERE 2"),a=this.state.customers;this.setState({filtered:a})}},{key:"onClickForSort",value:function(e){var t=this;if(console.log(e.target.value),"Name"===e.target.value){var a=this.state.filtered;a.sort((function(e,a){var n=e.name.toLowerCase(),r=a.name.toLowerCase();return t.state.ascendingName?n<r?1:n>r?-1:0:t.state.ascendingName?void 0:n<r?-1:n>r?1:0})),console.log(a);var n=this.state.ascendingName?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:a,ascendingName:!this.state.ascendingName,nameSortButtonValue:n,DOJSortButtonValue:"Sort",membershipEndSortButtonValue:"Sort",noOfGamesSortButtonValue:"Sort"})}if("DOJ"===e.target.value){var s=this.state.filtered;s.sort((function(e,a){var n=e.dateOfJoin,r=a.dateOfJoin;return t.state.ascendingDOJ?n<r?1:n>r?-1:0:t.state.ascendingDOJ?void 0:n<r?-1:n>r?1:0})),console.log(s);var l=this.state.ascendingDOJ?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:s,ascendingDOJ:!this.state.ascendingDOJ,DOJSortButtonValue:l,nameSortButtonValue:"Sort",membershipEndSortButtonValue:"Sort",noOfGamesSortButtonValue:"Sort"})}if("Membership"===e.target.value){var o=this.state.filtered;o.sort((function(e,a){var n=e.latestMembership.end,r=a.latestMembership.end;return t.state.ascendingMembershipEnd?n<r?1:n>r?-1:0:t.state.ascendingMembershipEnd?void 0:n<r?-1:n>r?1:0})),console.log(o);var i=this.state.ascendingMembershipEnd?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:o,ascendingMembershipEnd:!this.state.ascendingMembershipEnd,membershipEndSortButtonValue:i,nameSortButtonValue:"Sort",DOJSortButtonValue:"Sort",noOfGamesSortButtonValue:"Sort"})}if("No Of Games"===e.target.value){var m=this.state.filtered;m.sort((function(e,a){var n=e.noOfGames,r=a.noOfGames;return t.state.ascendingNoOfGames?n<r?1:n>r?-1:0:t.state.ascendingNoOfGames?void 0:n<r?-1:n>r?1:0})),console.log(m);var c=this.state.ascendingNoOfGames?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:m,ascendingNoOfGames:!this.state.ascendingNoOfGames,noOfGamesSortButtonValue:c,nameSortButtonValue:"Sort",DOJSortButtonValue:"Sort",membershipEndSortButtonValue:"Sort"})}}},{key:"render",value:function(){var e=this;return console.log(this.state.filtered),r.a.createElement("div",null,this.renderRedirect(),r.a.createElement("input",{type:"button",className:"btn btn-primary",value:"Add Customer",onClick:this.setRedirect}),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search...",onChange:this.handleChange}),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:"1em"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{paddingBottom:"1.3%"}},"Sr"),r.a.createElement("th",null,"Name",r.a.createElement("button",{className:"btn btn-primary",value:"Name",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.nameSortButtonValue)),r.a.createElement("th",{style:{paddingBottom:"1.3%"}},"Email-ID"),r.a.createElement("th",null,"Date Of Joining",r.a.createElement("button",{className:"btn btn-primary",value:"DOJ",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.DOJSortButtonValue)),r.a.createElement("th",null,"Membership Expiry",r.a.createElement("button",{className:"btn btn-primary",value:"Membership",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.membershipEndSortButtonValue)),r.a.createElement("th",null,"NoOfGames",r.a.createElement("button",{className:"btn btn-primary",value:"No Of Games",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.noOfGamesSortButtonValue)))),r.a.createElement("tbody",null,this.state.customers_loaded?this.state.filtered.length>0?this.state.filtered.map((function(t,a){return r.a.createElement(I,{mode:"customers",id:t._id,sr:a+1,name:t.name,email:t.email,noOfGames:t.noOfGames,dateOfJoin:e.convertDate(t.dateOfJoin),dateOfMembershipEnd:t.latestMembership.active?e.convertDate(t.latestMembership.end):"Expired Membership"})})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",style:{position:"relative",top:"50%",left:"50%"}},"Nothing to show!")):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))))))}}]),a}(n.Component),F=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){console.log("Test"),n.setState({redirect:!0})},n.renderRedirect=function(){if(n.state.redirect)return r.a.createElement(h.a,{push:!0,to:"/transaction/"+n.state.id})},console.log(e),n.state={index:e.index,id:e.id,game_name:e.game_name,customer_name:e.customer_name,date_issue:e.date_issue,date_return:e.date_return},n}return Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({index:e.index,id:e.id,game_name:e.game_name,customer_name:e.customer_name,date_issue:e.date_issue,date_return:e.date_return})}},{key:"render",value:function(){return r.a.createElement("tr",{id:this.state._id,className:"items",onClick:this.setRedirect},this.renderRedirect(),r.a.createElement("td",null,this.state.index),r.a.createElement("td",null,this.state.id),r.a.createElement("td",null,this.state.customer_name),r.a.createElement("td",null,this.state.game_name),r.a.createElement("td",null,this.state.date_issue),r.a.createElement("td",null,this.state.date_return))}}]),a}(n.Component),V=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={transactions:[],filtered:[],ascendingCustomerName:!0,ascendingGameName:!0,ascendingDateIssue:!0,ascendingDateReturn:!0,customerNameSortButtonValue:"Sort",gameNameSortButtonValue:"Sort",dateIssueButtonValue:r.a.createElement("span",null,"\u2193"),dateReturnButtonValue:"Sort",dateIssueFrom:"",dateIssueTo:"",dateReturnFrom:"",dateReturnTo:"",transactions_loaded:!1},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.getTransactions=n.getTransactions.bind(Object(m.a)(n)),n.onClickForSort=n.onClickForSort.bind(Object(m.a)(n)),n.getIssueDates=n.getIssueDates.bind(Object(m.a)(n)),n.getReturnDates=n.getReturnDates.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getTransactions()}},{key:"getTransactions",value:function(){var e=this;this.setState({dateIssueFrom:"",dateIssueTo:"",dateReturnFrom:"",dateReturnTo:""}),S.a.get("https://prayuj-gamerent.herokuapp.com/transaction").then((function(t){return e.setState({transactions:t.data,filtered:t.data,transactions_loaded:!0})}))}},{key:"convertDate",value:function(e){var t=new Date(e);return String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear()}},{key:"handleChange",value:function(e){var t=[],a=[];if(""!==e.target.value){var n,r=[];r=(t=this.state.transactions).filter((function(t){var a=t.gameInfo.name.toLowerCase(),n=e.target.value.toLowerCase();return a.includes(n)})),n=t.filter((function(t){var a=t.customerInfo.name.toLowerCase(),n=e.target.value.toLowerCase();return a.includes(n)})),a=r.concat(n)}else a=this.state.transactions;this.setState({filtered:a})}},{key:"onClickForSort",value:function(e){var t=this;if("Customer Name"===e.target.value){var a=this.state.filtered;a.sort((function(e,a){var n=e.customerInfo.name.toLowerCase(),r=a.customerInfo.name.toLowerCase();return t.state.ascendingCustomerName?n<r?1:n>r?-1:0:t.state.ascendingCustomerName?void 0:n<r?-1:n>r?1:0}));var n=this.state.ascendingCustomerName?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:a,ascendingCustomerName:!this.state.ascendingCustomerName,customerNameSortButtonValue:n,gameNameSortButtonValue:"Sort",dateIssueButtonValue:"Sort",dateReturnButtonValue:"Sort"})}if("Game Name"===e.target.value){var s=this.state.filtered;s.sort((function(e,a){var n=e.gameInfo.name.toLowerCase(),r=a.gameInfo.name.toLowerCase();return t.state.ascendingGameName?n<r?1:n>r?-1:0:t.state.ascendingGameName?void 0:n<r?-1:n>r?1:0}));var l=this.state.ascendingGameName?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:s,ascendingGameName:!this.state.ascendingGameName,gameNameSortButtonValue:l,customerNameSortButtonValue:"Sort",dateIssueButtonValue:"Sort",dateReturnButtonValue:"Sort"})}if("Date Issue"===e.target.value){var o=this.state.filtered;o.sort((function(e,a){var n=e.date_issue,r=a.date_issue;return t.state.ascendingDateIssue?n<r?1:n>r?-1:0:t.state.ascendingDateIssue?void 0:n<r?-1:n>r?1:0}));var i=this.state.ascendingDateIssue?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:o,ascendingDateIssue:!this.state.ascendingDateIssue,dateIssueButtonValue:i,customerNameSortButtonValue:"Sort",gameNameSortButtonValue:"Sort",dateReturnButtonValue:"Sort"})}if("Date Return"===e.target.value){var m=this.state.filtered;m.sort((function(e,a){var n,r;return t.state.ascendingDateReturn?e.return&&a.return?(n=e.date_return)<(r=a.date_return)?1:n>r?-1:0:!e.return&&a.return?1:e.return&&!a.return?-1:(n=e.date_issue)<(r=a.date_issue)?1:n>r?-1:0:t.state.ascendingDateReturn?void 0:e.return&&a.return?(n=e.date_return)<(r=a.date_return)?-1:n>r?1:0:!e.return&&a.return?-1:e.return&&!a.return?1:(n=e.date_issue)<(r=a.date_issue)?-1:n>r?1:0}));var c=this.state.ascendingDateReturn?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState(Object(v.a)({filtered:m,ascendingDateReturn:!this.state.ascendingDateReturn,dateReturnButtonValue:c,customerNameSortButtonValue:"Sort",gameNameSortButtonValue:"Sort"},"gameNameSortButtonValue","Sort"))}}},{key:"getIssueDates",value:function(e){var t=this;e.preventDefault(),""!==e.target.from.value&&""!==e.target.to.value&&S.a.get("https://prayuj-gamerent.herokuapp.com/transaction/dates/mode=issue&from="+e.target.from.value+"&to="+e.target.to.value).then((function(e){return t.setState({transactions:e.data,filtered:e.data})}))}},{key:"getReturnDates",value:function(e){var t=this;e.preventDefault(),""!==e.target.from.value&&""!==e.target.to.value&&S.a.get("https://prayuj-gamerent.herokuapp.com/transaction/dates/mode=return&from="+e.target.from.value+"&to="+e.target.to.value).then((function(e){return t.setState({transactions:e.data,filtered:e.data})}))}},{key:"getToday",value:function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+a+"-"+t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search...",onChange:this.handleChange}),r.a.createElement("form",{onSubmit:this.getIssueDates},"Select Date of Issue",r.a.createElement("input",{name:"from",type:"date",value:this.state.dateIssueFrom,max:this.getToday(),onChange:function(t){return e.setState({dateIssueFrom:t.target.value})}}),"to",r.a.createElement("input",{name:"to",type:"date",value:this.state.dateIssueTo,min:this.state.dateIssueFrom,max:this.getToday(),onChange:function(t){return e.setState({dateIssueTo:t.target.value})}}),r.a.createElement("input",{type:"submit",className:"btn btn-info",value:"Get"})),r.a.createElement("form",{onSubmit:this.getReturnDates},"Select Date of Return",r.a.createElement("input",{name:"from",type:"date",max:this.getToday(),value:this.state.dateReturnFrom,onChange:function(t){return e.setState({dateReturnFrom:t.target.value})}}),"to",r.a.createElement("input",{name:"to",type:"date",value:this.state.dateReturnTo,min:this.state.dateReturnFrom,max:this.getToday(),onChange:function(t){return e.setState({dateReturnTo:t.target.value})}}),r.a.createElement("input",{type:"submit",className:"btn btn-info",value:"Get"})),r.a.createElement("input",{type:"button",className:"btn btn-primary",value:"Show all",onClick:this.getTransactions}),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{paddingBottom:"1.3%"}},"Sr"),r.a.createElement("th",{style:{paddingBottom:"1.3%"}},"Transaction ID"),r.a.createElement("th",null,"Member Name"," ",r.a.createElement("button",{className:"btn btn-primary",value:"Customer Name",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.customerNameSortButtonValue)),r.a.createElement("th",null,"Game Name"," ",r.a.createElement("button",{className:"btn btn-primary",value:"Game Name",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.gameNameSortButtonValue)),r.a.createElement("th",null,"Date Issue"," ",r.a.createElement("button",{className:"btn btn-primary",value:"Date Issue",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.dateIssueButtonValue)),r.a.createElement("th",null,"Date Return",r.a.createElement("button",{className:"btn btn-primary",value:"Date Return",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.dateReturnButtonValue)))),r.a.createElement("tbody",null,this.state.transactions_loaded?this.state.filtered.map((function(t,a){return r.a.createElement(F,{index:a+1,id:t._id,game_name:t.gameInfo.name,customer_name:t.customerInfo.name,date_issue:e.convertDate(t.date_issue),date_return:t.return?e.convertDate(t.date_return):"Not Returned"})})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))))))}}]),a}(n.Component),A=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(e){console.log(e.target.value),"transaction"===e.target.attributes[0].value&&n.setState({redirect_to_transaction:!0,transaction_id:e.target.attributes[1].value}),"Update"===e.target.value&&n.setState({redirect_to_update:!0}),"Issue"===e.target.value?n.setState({redirect_to_issue:!0}):n.setState({redirect_to_add_plan:!0})},n.renderRedirect=function(){return n.state.redirect_to_update?r.a.createElement(h.a,{push:!0,to:"/update_game/"+n.state.id}):n.state.redirect_to_transaction?r.a.createElement(h.a,{push:!0,to:"/transaction/"+n.state.transaction_id}):n.state.redirect_to_issue?r.a.createElement(h.a,{push:!0,to:"/issue/mode=game&id="+n.state.id}):void 0},n.state={id:e.match.params.id,name:"",description:"",data:"",name_description_loaded:!1,data_loaded:!1,history_loaded:!1,history:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getGameDetail(),this.getGameItemDetail(),this.getHistory()}},{key:"getGameDetail",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/game/"+this.state.id).then((function(t){console.log(t.data,e.state.id),e.setState({name:t.data.name,description:t.data.description,name_description_loaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"getGameItemDetail",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/game/items/"+this.state.id).then((function(t){console.log(t.data,e.state.id),e.setState({data:t.data,data_loaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"getHistory",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/game/history/"+this.state.id).then((function(t){console.log(t.data,e.state.id),e.setState({history:t.data,history_loaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"convertDate",value:function(e){var t=new Date(e);return String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear()}},{key:"render",value:function(){var e=this;console.log(this.state.data);var t=this.state.data?this.state.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.items.serial_no),r.a.createElement("td",null,e.items.console),r.a.createElement("td",null,e.items.status),r.a.createElement("td",null,"Owner"==e.convertedId?"Owner":e.customerInfo[0].name))})):r.a.createElement("div",null),a=this.state.history.length>0?this.state.history.map((function(t,a){return r.a.createElement("tr",{value:"transaction",id:t._id,className:"items",onClick:e.setRedirect},r.a.createElement("td",{value:"transaction",id:t._id},a+1),r.a.createElement("td",{value:"transaction",id:t._id},t.gameInfo.items.serial_no),r.a.createElement("td",{value:"transaction",id:t._id},t.gameInfo.items.console),r.a.createElement("td",{value:"transaction",id:t._id},t.customerInfo.name),r.a.createElement("td",{value:"transaction",id:t._id},e.convertDate(t.date_issue)),r.a.createElement("td",{value:"transaction",id:t._id},t.return?e.convertDate(t.date_return):"Not Returned"))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",style:{position:"relative",top:"50%",left:"50%"}},"No Past History"));return r.a.createElement("div",null,this.renderRedirect(),r.a.createElement("input",{type:"button",onClick:this.setRedirect,className:"btn btn-primary",value:"Update"}),r.a.createElement("input",{type:"button",onClick:this.setRedirect,className:"btn btn-primary",value:"Issue"}),r.a.createElement("h3",null,"Name:"," ",this.state.name_description_loaded?this.state.name:r.a.createElement(O,null)),r.a.createElement("h3",null,"Description:"," ",this.state.name_description_loaded?this.state.description:r.a.createElement(O,null)),r.a.createElement("br",null),r.a.createElement("h3",null,"Current Status of Items:"),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr"),r.a.createElement("th",null,"Serial Number"),r.a.createElement("th",null,"Console"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Responsible"))),r.a.createElement("tbody",null,this.state.data_loaded?t:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))))),r.a.createElement("br",null),r.a.createElement("h3",null,"Past History of Items:"),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr"),r.a.createElement("th",null,"Serial Number"),r.a.createElement("th",null,"Console"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Date Issue"),r.a.createElement("th",null,"Date Return"))),r.a.createElement("tbody",null,this.state.history_loaded?a:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))))))}}]),a}(n.Component),T=a(11),M=a.n(T),L=a(22),P=a.n(L),x=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(e){console.log(e.target.attributes[1].value),"transaction"===e.target.attributes[0].value?n.setState({redirect_to_transaction:!0,transaction_id:e.target.attributes[1].value}):"Update"===e.target.value?(n.setState({otp_issued:!1,verifying:!1}),S.a.get("https://prayuj-gamerent.herokuapp.com/customer/generate_otp/id="+n.state.id+"&mode=Updating&game=Null&console=Null").then((function(e){console.log(e.data),n.setState({message:e.data.message,otp_issued:!0})})),n.setState({modal_show:!0})):"Issue"===e.target.value?n.setState({redirect_to_issue:!0}):"Return"===e.target.value?n.setState({redirect_to_return:!0}):"Add Plan"===e.target.value&&n.setState({redirect_to_add_plan:!0})},n.renderRedirect=function(){return n.state.redirect_to_update?r.a.createElement(h.a,{push:!0,to:"/update_customer/"+n.state.id}):n.state.redirect_to_add_plan?r.a.createElement(h.a,{push:!0,to:"/add_plan/"+n.state.id}):n.state.redirect_to_issue?r.a.createElement(h.a,{push:!0,to:"/issue/mode=customer&id="+n.state.id}):n.state.redirect_to_return?r.a.createElement(h.a,{push:!0,to:"/return/mode=customer&id="+n.state.id}):n.state.redirect_to_transaction?r.a.createElement(h.a,{push:!0,to:"/transaction/"+n.state.transaction_id}):void 0},n.state={id:e.match.params.id,data:"",history:[],modal_show:!1,history_loaded:!1,data_loaded:!1,otp_issued:!1,verifying:!1},n.handleClick=n.handleClick.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCustomerDetail(),this.getCustomerGameHistory()}},{key:"getCustomerGameHistory",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/customer/history/"+this.state.id).then((function(t){console.log(t.data),t.data?e.setState({history:t.data,history_loaded:!0}):e.setState({history:[],history_loaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"getCustomerDetail",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/customer/"+this.state.id).then((function(t){e.setState({data:t.data,data_loaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),console.log(e.target.otp.value);var a=this.state.id;this.setState({verifying:!0}),S.a.post("https://prayuj-gamerent.herokuapp.com/customer/verify_otp/"+a,{otp:e.target.otp.value}).then((function(e){console.log(e.data.isVerify),e.data.isVerify?t.setState({redirect_to_update:!0}):(t.setState({verifying:!1}),alert("Incorrect OTP, Issue again"))}))}},{key:"convertDate",value:function(e){var t=new Date(e);return String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear()}},{key:"render",value:function(){var e=this;console.log(this.state.data);var t=this.state.data.membership?this.state.data.membership.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.plan),r.a.createElement("td",null,e.convertDate(t.start)),r.a.createElement("td",null,e.convertDate(t.end)),r.a.createElement("td",null,t.active?"True":"False"))})):r.a.createElement("div",null),a=this.state.history.length>0?this.state.history.map((function(t,a){return r.a.createElement("tr",{className:"items",onClick:e.setRedirect,value:"transaction",id:t._id},r.a.createElement("td",{value:"transaction",id:t._id},a+1),r.a.createElement("td",{value:"transaction",id:t._id},t.gameInfo.name),r.a.createElement("td",{value:"transaction",id:t._id},t.gameInfo.items.console),r.a.createElement("td",{value:"transaction",id:t._id},t.gameInfo.items.serial_no),r.a.createElement("td",{value:"transaction",id:t._id},e.convertDate(t.date_issue)),r.a.createElement("td",{value:"transaction",id:t._id},t.return?e.convertDate(t.date_return):"Not Returned"))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",style:{position:"relative",top:"50%",left:"50%"}},"No Past History"));return r.a.createElement("div",null,this.renderRedirect(),r.a.createElement("input",{type:"button",onClick:this.setRedirect,className:"btn btn-primary",value:"Update"}),r.a.createElement("input",{type:"button",onClick:this.setRedirect,className:"btn btn-primary",value:"Add Plan"}),r.a.createElement("input",{type:"button",onClick:this.setRedirect,className:"btn btn-primary",value:"Issue"}),r.a.createElement("input",{type:"button",onClick:this.setRedirect,className:"btn btn-primary",value:"Return"}),this.state.data_loaded?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("strong",null,"Name: ")," ",this.state.data.name),r.a.createElement("div",null,r.a.createElement("strong",null,"Email: "),this.state.data.email),r.a.createElement("div",null,r.a.createElement("strong",null,"Addr: "),this.state.data.address),r.a.createElement("div",null,r.a.createElement("strong",null,"Addr2: "),this.state.data.address2),r.a.createElement("div",null,r.a.createElement("strong",null,"ZIP: "),this.state.data.zip),r.a.createElement("div",null,r.a.createElement("strong",null,"Mobile Number: "),this.state.data.mobile_no),r.a.createElement("div",null,r.a.createElement("strong",null,"Alt Mobile No: "),this.state.data.alt_mobile_no),r.a.createElement("div",null,r.a.createElement("strong",null,"Date Of Join: "),this.convertDate(this.state.data.dateOfJoin))):r.a.createElement("div",null,r.a.createElement(O,null)),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr"),r.a.createElement("th",null,"Plan Name"),r.a.createElement("th",null,"Start"),r.a.createElement("th",null,"End"),r.a.createElement("th",null,"Active"))),r.a.createElement("tbody",null,this.state.data_loaded?t:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))))),r.a.createElement("h3",null,"Past History:"),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr"),r.a.createElement("th",null,"Game"),r.a.createElement("th",null,"Console"),r.a.createElement("th",null,"Serial no"),r.a.createElement("th",null,"Date Issue"),r.a.createElement("th",null,"Date Return"))),r.a.createElement("tbody",null,this.state.history_loaded?a:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))))),r.a.createElement(M.a,{show:this.state.modal_show},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Title,null,"Game Return")),r.a.createElement("form",{onSubmit:this.handleClick},r.a.createElement(M.a.Body,null,r.a.createElement("div",null,"Enter OTP",r.a.createElement("input",{type:"number",name:"otp"})),this.state.otp_issued?r.a.createElement(D.a,null,r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"OTP")),r.a.createElement(D.a.Body,null,this.state.message)):r.a.createElement(O,null)),r.a.createElement(M.a.Footer,null,r.a.createElement(P.a,{variant:"secondary",onClick:function(){return e.setState({modal_show:!1})}},"Close"),r.a.createElement(P.a,{variant:"primary",type:"submit"},this.state.verifying?r.a.createElement(O,null):"Verify")))))}}]),a}(n.Component),J=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(e){console.log(e.target.value==="Go to "+n.state.data.customerInfo.name),e.target.value==="Go to "+n.state.data.customerInfo.name?n.setState({redirect_to_customer:!0}):e.target.value==="Go to "+n.state.data.gameInfo.name&&n.setState({redirect_to_game:!0})},n.renderRedirect=function(){return n.state.redirect_to_game?r.a.createElement(h.a,{push:!0,to:"/game/"+n.state.data.gameInfo._id}):n.state.redirect_to_customer?r.a.createElement(h.a,{push:!0,to:"/customer/"+n.state.data.customerInfo._id}):void 0},n.state={id:e.match.params.id,redirect_to_customer:!1,redirect_to_game:!1,modal_show:!1,otp_issued:!1,verifying:!1},n.getTransactionDetails=n.getTransactionDetails.bind(Object(m.a)(n)),n.handleClick=n.handleClick.bind(Object(m.a)(n)),n.confirmReturn=n.confirmReturn.bind(Object(m.a)(n)),n.modalClose=n.modalClose.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getTransactionDetails()}},{key:"confirmReturn",value:function(e){var t=this;console.log(e.target.id);var a=e.target.id.split(" ");this.setState({otp_issued:!1,verifying:!1}),S.a.get("https://prayuj-gamerent.herokuapp.com/customer/generate_otp/id="+a[3]+"&mode=Returning&game="+a[1]+"&console="+a[4]).then((function(e){console.log(e.data),t.setState({message:e.data.message,otp_issued:!0})})),this.setState({modal_show:!0,ids:a})}},{key:"modalClose",value:function(){this.setState({modal_show:!1})}},{key:"getTransactionDetails",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/transaction/get/"+this.state.id).then((function(t){e.setState({data:t.data})}))}},{key:"convertDate",value:function(e){var t=new Date(e);return String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear()+" ("+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+" hrs)"}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),console.log(e.target.otp.value);var a=this.state.ids;this.setState({verifying:!0}),S.a.post("https://prayuj-gamerent.herokuapp.com/customer/verify_otp/"+a[3],{otp:e.target.otp.value}).then((function(e){console.log(e.data.isVerify),e.data.isVerify?S.a.post("https://prayuj-gamerent.herokuapp.com/customer/return/",{transaction_id:a[0],game_id:a[1],item_id:a[2]}).then((function(e){t.getTransactionDetails(),t.setState({modal_show:!1})})).catch((function(e){return console.log(e)})):(t.setState({verifying:!1}),alert("Incorrect OTP, Issue again"))}))}},{key:"render",value:function(){return this.state.data?r.a.createElement("div",null,this.renderRedirect(),r.a.createElement("h4",null,"Transaction ID: ",this.state.id),r.a.createElement("h4",null,"Member Name: ",this.state.data.customerInfo.name),r.a.createElement("h4",null,"Game Name: ",this.state.data.gameInfo.name),r.a.createElement("h4",null,"Console: ",this.state.data.gameInfo.items.console),r.a.createElement("h4",null,"Serial Number: ",this.state.data.gameInfo.items.serial_no),r.a.createElement("h4",null,"Date Issued: ",this.convertDate(this.state.data.date_issue)),r.a.createElement("h4",null,this.state.data.return?"Date Returned:"+this.convertDate(this.state.data.date_return):"Status: Not Returned"),r.a.createElement("input",{type:"button",value:"Go to "+this.state.data.customerInfo.name,className:"btn btn-primary",onClick:this.setRedirect}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"button",value:"Go to "+this.state.data.gameInfo.name,className:"btn btn-primary",onClick:this.setRedirect}),r.a.createElement("br",null),r.a.createElement("br",null),this.state.data.return?r.a.createElement("div",null):r.a.createElement("input",{type:"button",value:"Return",className:"btn btn-primary",id:this.state.data._id+" "+this.state.data.game_id+" "+this.state.data.item_id+" "+this.state.data.customerInfo._id+" "+this.state.data.gameInfo.items.console,onClick:this.confirmReturn}),r.a.createElement(M.a,{show:this.state.modal_show},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Title,null,"Game Return")),r.a.createElement("form",{onSubmit:this.handleClick},r.a.createElement(M.a.Body,null,r.a.createElement("div",null,"Enter OTP",r.a.createElement("input",{type:"number",name:"otp"})),this.state.otp_issued?r.a.createElement(D.a,null,r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"OTP")),r.a.createElement(D.a.Body,null,this.state.message)):r.a.createElement(O,null)),r.a.createElement(M.a.Footer,null,r.a.createElement(P.a,{variant:"secondary",onClick:this.modalClose},"Close"),r.a.createElement(P.a,{variant:"primary",type:"submit"},this.state.verifying?r.a.createElement(O,null):"Verify"))))):r.a.createElement("div",null,"Let me Load ",r.a.createElement(O,null))}}]),a}(n.Component),X=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={name:"",description:"",items:[{console:"Choose a console",_id:0,serial_no:"",mrp:"",description:"",status:"Available"}],old_items:[],id_count:0,count:1},n.onAdd=n.onAdd.bind(Object(m.a)(n)),n.onDelete=n.onDelete.bind(Object(m.a)(n)),n.handleForm=n.handleForm.bind(Object(m.a)(n)),n.onChangeOfAvailableButton=n.onChangeOfAvailableButton.bind(Object(m.a)(n)),n.nameChange=n.nameChange.bind(Object(m.a)(n)),n.descriptionChange=n.descriptionChange.bind(Object(m.a)(n)),n.itemsChange=n.itemsChange.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e){"update"===e.mode&&this.setState(Object(v.a)({name:e.name,description:e.description,old_items:e.items,count:e.count,items:[]},"count",0))}},{key:"onAdd",value:function(){var e=this.state.items;e.push({_id:this.state.id_count+1,serial_no:"",console:"",mrp:"",new:!0,status:"Available"}),console.log(e),this.setState({items:e,id_count:this.state.id_count+1,count:this.state.count+1})}},{key:"onChangeOfAvailableButton",value:function(e){console.log(e.target);for(var t=this.state.old_items,a=0;a<t.length;a++)t[a]._id==e.target.id&&(t[a].status="Unavailable"===t[a].status?"Available":"Unavailable");this.setState({old_items:t})}},{key:"onDelete",value:function(e){console.log(e.target.id);var t=this.state.items;console.log(t);for(var a=0;a<t.length;a++)t[a]._id==e.target.id.toString()&&(console.log("Found"),t.splice(a,1));console.log(t),this.setState({items:t,count:this.state.count-1})}},{key:"handleForm",value:function(e){e.preventDefault(),console.log(this.state.count),this.props.handleForm(e,this.state.count,this.state.items,this.state.old_items)}},{key:"nameChange",value:function(e){console.log(e.target.value),this.setState({name:e.target.value})}},{key:"descriptionChange",value:function(e){this.setState({description:e.target.value})}},{key:"itemsChange",value:function(e){console.log(e.target.name,e.target.value,e.target.id);for(var t=this.state.items,a=0;a<t.length;a++){var n=t[a];n._id===parseInt(e.target.id)&&("serial"===e.target.name?n.serial_no=e.target.value:"console"===e.target.name?n.console=e.target.value:n.mrp=e.target.value)}this.setState({items:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginTop:10}},r.a.createElement("form",{onSubmit:this.handleForm},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name: "),r.a.createElement("input",{type:"text",className:"form-control",name:"name",value:this.state.name,required:!0,onChange:this.nameChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description: "),r.a.createElement("input",{type:"text",className:"form-control",name:"description",value:this.state.description,required:!0,onChange:this.descriptionChange})),this.state.old_items?this.state.old_items.map((function(t){return r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("input",{id:t._id,type:"text",className:"form-control",placeholder:"Serial No.",name:"serial",disabled:!0,value:t.serial_no})),r.a.createElement("div",{className:"form-group col-md-3"},r.a.createElement("select",{className:"form-control",id:t._id,name:"console",disabled:!0},r.a.createElement("option",null,"Choose a console"),r.a.createElement("option",{selected:"PS4"===t.console},"PS4"),r.a.createElement("option",{selected:"XBOX One"===t.console},"XBOX One"))),r.a.createElement("div",{className:"form-group col-md-1 "},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Price",name:"price",id:t._id,disabled:!0,value:t.mrp})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:e.onChangeOfAvailableButton,disabled:"Owner"!==t.responsible,id:t._id},"Available"===t.status?"Make Unavailable":"Make Available")))})):r.a.createElement("div",null),this.state.items.map((function(t){return r.a.createElement("div",{className:"form-row",onChange:e.itemsChange},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("input",{type:"text",id:t._id,className:"form-control",placeholder:"Serial No.",name:"serial",value:t.serial_no,required:!0})),r.a.createElement("div",{className:"form-group col-md-3"},r.a.createElement("select",{className:"form-control",name:"console",id:t._id},r.a.createElement("option",{selected:"PS4"===t.console},"PS4"),r.a.createElement("option",{selected:"XBOX One"===t.console},"XBOX One"))),r.a.createElement("div",{className:"form-group col-md-1 "},r.a.createElement("input",{type:"text",id:t._id,className:"form-control",placeholder:"Price",name:"price",value:t.mrp,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:e.onDelete,id:t._id},"Delete")))})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onAdd},"Add")),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"add"===this.props.mode?"Add new Game":"Update Game",className:"btn btn-primary"}))))}}]),a}(n.Component),H=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).renderRedirect=function(){if(n.state.redirect_to_dashboard)return r.a.createElement(h.a,{push:!0,to:"/"})},n.state={redirect_to_dashboard:!1,game_name:"",game_description:"",game_properties:[{console:"",id:1,serial:"",mrp:""}],count:1},n.onAdd=n.onAdd.bind(Object(m.a)(n)),n.onDelete=n.onDelete.bind(Object(m.a)(n)),n.onSubmit=n.onSubmit.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"onAdd",value:function(){var e=this.state.game_properties;e.push({id:this.state.count+1,serial:"",console:"",mrp:""}),console.log(e),this.setState({game_properties:e,count:this.state.count+1})}},{key:"onDelete",value:function(e){console.log(e.target.id);var t=this.state.game_properties;console.log(t);for(var a=0;a<t.length;a++)console.log(t[a].id.toString()==e.target.id),t[a].id==e.target.id.toString()&&(console.log("Found"),t.splice(a,1));console.log(t),this.setState({game_properties:t})}},{key:"onSubmit",value:function(e,t,a){var n,r=this;console.log(e.target,t),console.log("Form submitted:"),console.log("Game Name: ".concat(e.target.name.value)),console.log("Game Description: ".concat(e.target.description.value)),console.log("Game Properties"),a=[];for(var s=0;s<t;s++){console.log("hello");var l=4*s+2,o=e.target[l].value,i=e.target[l+1].value,m=e.target[l+2].value;a.push({console:i,serial_no:o,status:"Available",responsible:"Owner",mrp:m,description:"Test"}),console.log(a[s])}var c={name:e.target.name.value,description:e.target.description.value,items:a};S.a.post("https://prayuj-gamerent.herokuapp.com/game/add",c).then((function(e){console.log(e.data),r.setState({redirect_to_dashboard:!0})})).catch((function(e){return console.log(e)})),this.setState({game_name:"",game_description:"",game_properties:[(n={console:"",id:1,serial:""},Object(v.a)(n,"console",""),Object(v.a)(n,"mrp",""),n)],count:1})}},{key:"render",value:function(){this.state.status;return r.a.createElement("div",{style:{marginTop:10}},this.renderRedirect(),r.a.createElement("h3",null,"Add New Game"),r.a.createElement(X,{handleForm:this.onSubmit,mode:"add"}))}}]),a}(n.Component),z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),n=t.call(this,e),console.log(e),"add"===e.mode&&(n.state={mode:"Add Customer",name:"",email:"",address:"",address2:"",city:"",zip:"",mobile_no:"",alt_mobile_no:"",show:!0}),"edit"===e.mode&&(n.state={mode:"Update this Customer",name:e.name,email:e.email,address:e.address,address2:e.address2,city:e.city,zip:e.zip,mobile_no:e.mobile_no,alt_mobile_no:e.alt_mobile_no,show:!1}),n}return Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({name:e.name,email:e.email,address:e.address,address2:e.address2,city:e.city,zip:e.zip,mobile_no:e.mobile_no,alt_mobile_no:e.alt_mobile_no})}},{key:"render",value:function(){var e=this.state.show?r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control",name:"plan",required:!0},r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Choose a plan"),r.a.createElement("option",null,"3 months, 1 game/month"),r.a.createElement("option",null,"6 months, 2 games/month"),r.a.createElement("option",null,"1 year, 4 games/month"))):r.a.createElement("div",null);return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.props.onSubmit},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-5"},r.a.createElement("label",{for:"inputEmail4"},"Name"),r.a.createElement("input",{name:"name",className:"form-control",id:"inputEmail4",placeholder:"Name",defaultValue:this.state.name,required:!0})),r.a.createElement("div",{className:"form-group col-md-5"},r.a.createElement("label",{for:"inputPassword4"},"Email"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",id:"inputPassword4",placeholder:"Email",defaultValue:this.state.email,required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"inputAddress"},"Address"),r.a.createElement("input",{type:"text",name:"address1",className:"form-control",id:"inputAddress",placeholder:"1234 Main St",defaultValue:this.state.address})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"inputAddress2"},"Address 2"),r.a.createElement("input",{type:"text",name:"address2",className:"form-control",id:"inputAddress2",placeholder:"Apartment, studio, or floor",defaultValue:this.state.address2})),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-5"},r.a.createElement("label",{for:"inputCity"},"City"),r.a.createElement("input",{type:"text",className:"form-control",name:"inputCity",defaultValue:this.state.city})),r.a.createElement("div",{className:"form-group col-md-2"},r.a.createElement("label",{for:"inputZip"},"Pincode "),r.a.createElement("input",{type:"text",className:"form-control",name:"inputZip",defaultValue:this.state.zip}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{for:"inputCity"},"Mobile no."),r.a.createElement("input",{type:"text",className:"form-control",name:"mobileNo1",defaultValue:this.state.mobile_no})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{for:"inputState"},"Alternate Mobile no."),r.a.createElement("input",{type:"text",className:"form-control",name:"mobileNo2",defaultValue:this.state.alt_mobile_no}))),e,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:this.state.mode,className:"btn btn-primary"}))))}}]),a}(n.Component),Y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).renderRedirect=function(){if(n.state.redirect_to_dashboard)return r.a.createElement(h.a,{push:!0,to:"/"})},n.handleForm=n.handleForm.bind(Object(m.a)(n)),n.state={redirect_to_dashboard:!1},n}return Object(i.a)(a,[{key:"handleForm",value:function(e){var t=this;e.preventDefault();var a,n,r=new Date,s=r.getDate(),l=r.getMonth(),o=r.getFullYear();console.log(e.target.name.value,e.target.email.value,e.target.address1.value,e.target.address2.value,e.target.inputCity.value,e.target.inputZip.value,e.target.mobileNo1.value,e.target.mobileNo2.value,e.target.plan.value),"3 months, 1 game/month"===e.target.plan.value?(a=new Date(o,l+3,s),n="3M1G"):"6 months, 2 games/month"===e.target.plan.value?(a=new Date(o,l+6,s),n="6M2G"):"1 year, 4 games/month"===e.target.plan.value&&(a=new Date(o+1,l,s),n="1Y4G");var i={name:e.target.name.value,email:e.target.email.value,address:e.target.address1.value,address2:e.target.address2.value,city:e.target.inputCity.value,zip:e.target.inputZip.value,mobile_no:e.target.mobileNo1.value,alt_mobile_no:e.target.mobileNo2.value,dateOfJoin:r,membership:[{plan:n,start:r,end:a,active:!0}]};console.log(i),S.a.post("https://prayuj-gamerent.herokuapp.com/add",i).then((function(e){console.log(e.data),t.setState({redirect_to_dashboard:!0})})).catch((function(e){console.log(e),t.setState({status:"An Error has occured, check console log."})}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderRedirect(),r.a.createElement(z,{mode:"add",onSubmit:this.handleForm}))}}]),a}(n.Component),U=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){console.log("Test"),n.setState({redirect:!0})},n.renderRedirect=function(){if(n.state.redirect)return r.a.createElement(h.a,{push:!0,to:"/customer/"+n.state.id})},n.state={id:e.match.params.id,name:"",email:"",address:"",address2:"",city:"",zip:"",mobile_no:"",alt_mobile_no:"",membership:[]},n.handleForm=n.handleForm.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/customer/"+this.state.id).then((function(t){e.setState({name:t.data.name,email:t.data.email,address:t.data.address,address2:t.data.address2,city:t.data.city,zip:t.data.zip,mobile_no:t.data.mobile_no,alt_mobile_no:t.data.alt_mobile_no,membership:t.data.membership}),console.log(t.data)}))}},{key:"handleForm",value:function(e){var t=this;e.preventDefault(),console.log(e.target.name.value,e.target.email.value,e.target.address1.value,e.target.address2.value,e.target.inputCity.value,e.target.inputZip.value,e.target.mobileNo1.value,e.target.mobileNo2.value);var a={id:this.state.id,name:e.target.name.value,email:e.target.email.value,address:e.target.address1.value,address2:e.target.address2.value,city:e.target.inputCity.value,zip:e.target.inputZip.value,mobile_no:e.target.mobileNo1.value,alt_mobile_no:e.target.mobileNo1.value};S.a.post("https://prayuj-gamerent.herokuapp.com/customer/update/"+this.state.id,a).then((function(e){console.log(e.data),t.setRedirect()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return console.log(this.state.id),r.a.createElement("div",null,this.renderRedirect(),r.a.createElement(z,{mode:"edit",onSubmit:this.handleForm,name:this.state.name,email:this.state.email,address:this.state.address,address2:this.state.address2,city:this.state.city,zip:this.state.zip,mobile_no:this.state.mobile_no,alt_mobile_no:this.state.alt_mobile_no}))}}]),a}(n.Component),q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={id:e.match.params.id,name:"",membership:[],status:!1},n.handleForm=n.handleForm.bind(Object(m.a)(n)),n.getPlans=n.getPlans.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getPlans()}},{key:"getPlans",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/customer/"+this.state.id).then((function(t){e.setState({membership:t.data.membership})}))}},{key:"convertDate",value:function(e){var t=new Date(e),a=String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear();return console.log(a),a}},{key:"handleForm",value:function(e){var t=this;e.preventDefault();var a,n,r=new Date,s=r.getDate(),l=r.getMonth(),o=r.getFullYear();"3 months, 1 game/month"===e.target.plan.value?(a=new Date(o,l+3,s),n="3M1G"):"6 months, 2 games/month"===e.target.plan.value?(a=new Date(o,l+6,s),n="6M2G"):"1 year, 4 games/month"===e.target.plan.value&&(a=new Date(o+1,l,s),n="1Y4G");for(var i=this.state.membership,m=0;m<i.length;m++)i[m].active=!1;var c={plan:n,active:!0,start:r,end:a};i.push(c),console.log(i);var u={membership:i};S.a.post("https://prayuj-gamerent.herokuapp.com/customer/add_plan/"+this.state.id,u).then((function(e){console.log(e.data),t.getPlans()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleForm},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control",name:"plan"},r.a.createElement("option",null,"Choose a plan"),r.a.createElement("option",null,"3 months, 1 game/month"),r.a.createElement("option",null,"6 months, 2 games/month"),r.a.createElement("option",null,"1 year, 4 games/month"))),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Add Plan"})))}}]),a}(n.Component),W=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){console.log("Test"),n.setState({redirect:!0})},n.renderRedirect=function(){if(n.state.redirect)return r.a.createElement(h.a,{push:!0,to:"/game/"+n.state.id})},n.state={id:e.match.params.id,name:"",description:"",items:[{console:"",id:1,serial:"",mrp:""}]},n.onSubmit=n.onSubmit.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getGame()}},{key:"onSubmit",value:function(e,t,a,n){var r=this;console.log(e.target,t,a,n);for(var s=[],l=0;l<t;l++)if(!0===a[l].new){console.log("We are in new block");var o=4*l+2+4*n.length,i=e.target[o].value,m=e.target[o+1].value,c=e.target[o+2].value;console.log(l),s.push({console:m,serial_no:i,status:"Available",responsible:"Owner",mrp:c,description:"Test"})}else console.log("We are in old block"),s.push(a[l]);for(var u=0;u<n.length;u++)s.push(n[u]);console.log(s);var d={_id:this.state.id,name:e.target.name.value,description:e.target.description.value,items:s};S.a.post("https://prayuj-gamerent.herokuapp.com/game/update/"+this.state.id,d).then((function(e){console.log(e.data),r.setRedirect()})).catch((function(e){return console.log(e)}))}},{key:"getGame",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/game/"+this.state.id).then((function(t){console.log(t.data),e.setState({name:t.data.name,description:t.data.description,items:t.data.items,count:t.data.items.length})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return console.log(this.state),r.a.createElement("div",{style:{marginTop:10}},this.renderRedirect(),r.a.createElement("h3",null,"Update Game"),r.a.createElement(X,{handleForm:this.onSubmit,mode:"update",name:this.state.name,description:this.state.description,items:this.state.items,count:this.state.count}))}}]),a}(n.Component),K=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){n.setState({redirect_to_transaction:!0})},n.renderRedirect=function(){if(n.state.redirect_to_transaction)return r.a.createElement(h.a,{push:!0,to:"/transaction/"+n.state.transactionid})},"customer"===e.match.params.mode?n.state={mode:"customer",customer_id:e.match.params.id,show:!1,games:[],console:[],redirect_to_transaction:!1,modal_show:!1,button_disable:!0,otp_issued:!1,verifying:!1}:"game"===e.match.params.mode?n.state={mode:"game",game_id:e.match.params.id,show:!1,customers:[],console:[],redirect_to_transaction:!1,modal_show:!1,button_disable:!0,otp_issued:!1,verifying:!1}:"dashboard"===e.match.params.mode&&(n.state={mode:"dashboard",customers:[],show:!0,games:[],console:[],redirect_to_transaction:!1,modal_show:!1,button_disable:!0,otp_issued:!1,verifying:!1}),n.handleForm=n.handleForm.bind(Object(m.a)(n)),n.handleGameChange=n.handleGameChange.bind(Object(m.a)(n)),n.confirmIssue=n.confirmIssue.bind(Object(m.a)(n)),n.modalClose=n.modalClose.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCustomerDetail(),this.getGames()}},{key:"componentDidUpdate",value:function(){var e=this;console.log(this.state.mode,this.props.match.params.mode),this.state.mode!==this.props.match.params.mode&&("customer"===this.props.match.params.mode?this.setState({mode:"customer",customer_id:this.props.match.params.id},(function(){e.getCustomerDetail(),e.getGames()})):"game"===this.props.match.params.mode?this.setState({mode:"game",game_id:this.props.match.params.id},(function(){e.getCustomerDetail(),e.getGames()})):"dashboard"===this.props.match.params.mode&&this.setState({mode:"dashboard",show:!0},(function(){e.getCustomerDetail(),e.getGames()})))}},{key:"getCustomerDetail",value:function(){var e=this;"customer"===this.state.mode?S.a.get("https://prayuj-gamerent.herokuapp.com/customer/issue/"+this.state.customer_id).then((function(t){console.log(t.data),e.setState({customers:[t.data]}),0==t.data.length?(console.log("No Active Membership"),e.setState({show:!1})):"1Y4G"===t.data.plan&&t.data.noOfGames<4?(console.log("4 game plan"),e.setState({show:!0})):"6M2G"===t.data.plan&&t.data.noOfGames<2?(console.log("2 game plan"),e.setState({show:!0})):"3M1G"===t.data.plan&&t.data.noOfGames<1?(console.log("1 game plan"),e.setState({show:!0})):(console.log("5th condition"),e.setState({show:!1})),e.setState({data:t.data[0]})})).catch((function(e){return console.log(e)})):S.a.get("https://prayuj-gamerent.herokuapp.com/customer").then((function(t){for(var a=[],n=0;n<t.data.length;n++)t.data[n].latestMembership.active&&("1Y4G"===t.data[n].latestMembership.plan&&t.data[n].noOfGames<4?(console.log("4 game plan"),a.push(t.data[n])):"6M2G"===t.data[n].latestMembership.plan&&t.data[n].noOfGames<2?(console.log("2 game plan"),a.push(t.data[n])):"3M1G"===t.data[n].latestMembership.plan&&t.data[n].noOfGames<1?(console.log("1 game plan"),a.push(t.data[n])):console.log("5th condition"));e.setState({customers:a})})).catch((function(e){return console.log(e)}))}},{key:"getGames",value:function(){var e=this;"game"===this.state.mode?S.a.get("https://prayuj-gamerent.herokuapp.com/game/"+this.state.game_id).then((function(t){console.log(t.data),e.setState({games:[t.data]}),t.data.numberAvailable>0&&e.setState({show:!0}),t.data.numberPS4Available>0&&t.data.numberXBOXAvailable>0?e.setState({console:["PS4","XBOX One"]}):t.data.numberPS4Available>0?e.setState({console:["PS4"]}):t.data.numberXBOXAvailable>0?e.setState({console:["XBOX One"]}):e.setState({console:[]})})):S.a.get("https://prayuj-gamerent.herokuapp.com/game").then((function(t){console.log(t.data),e.setState({games:t.data})}))}},{key:"modalClose",value:function(){this.setState({modal_show:!1})}},{key:"confirmIssue",value:function(e){var t=this;e.preventDefault(),console.log(e.target.game.value,e.target.console.value,e.target.customer.value),this.setState({otp_issued:!1,verifying:!1}),"default"!=e.target.game.value&&"default"!=e.target.console.value&&"default"!=e.target.customer.value?(this.setState({modal_show:!0,game_id:e.target.game.value,selected_console:e.target.console.value,customer_id:e.target.customer.value,button_disable:!1}),console.log("https://prayuj-gamerent.herokuapp.com/customer/generate_otp/id="+e.target.customer.value+"&mode=Issuing&game="+e.target.game.value+"&console="+e.target.console.value),S.a.get("https://prayuj-gamerent.herokuapp.com/customer/generate_otp/id="+e.target.customer.value+"&mode=Issuing&game="+e.target.game.value+"&console="+e.target.console.value).then((function(e){console.log(e.data),t.setState({message:e.data.message,otp_issued:!0})}))):this.setState({modal_show:!0})}},{key:"handleForm",value:function(e){var t=this;e.preventDefault(),console.log(e.target.otp.value);var a=this.state.customer_id,n={game_id:this.state.game_id,console:this.state.selected_console};this.setState({verifying:!0}),console.log(JSON.stringify(n)),S.a.post("https://prayuj-gamerent.herokuapp.com/customer/verify_otp/"+a,{otp:e.target.otp.value}).then((function(e){console.log(e.data.isVerify),e.data.isVerify?S.a.post("https://prayuj-gamerent.herokuapp.com/customer/issue/"+a,n).then((function(e){"Not Available"!=e.data.game?(t.setState({show:!0}),t.setState({transactionid:e.data.game}),t.setRedirect()):alert(e.data.game)})).catch((function(e){alert(JSON.stringify(e))})):alert("Incorrect OTP, Issue again")}))}},{key:"handleGameChange",value:function(e){console.log(e.target.value);for(var t=this.state.games,a=0;a<t.length;a++)t[a]._id===e.target.value&&(t[a].numberPS4Available>0&&t[a].numberXBOXAvailable>0?this.setState({console:["PS4","XBOX One"]}):t[a].numberPS4Available>0?this.setState({console:["PS4"]}):t[a].numberXBOXAvailable>0?this.setState({console:["XBOX One"]}):this.setState({console:[]}))}},{key:"render",value:function(){if(this.state.show){var e,t,a=0==this.state.console.length?r.a.createElement("select",{className:"form-control",name:"console",disabled:!0},r.a.createElement("option",{value:"default"},"Not Available")):r.a.createElement("select",{className:"form-control",name:"console"},this.state.console.map((function(e){return r.a.createElement("option",null,e)})));return"customer"===this.state.mode&&(e=r.a.createElement("select",{className:"form-control",name:"customer",disabled:!0},this.state.customers.map((function(e){return r.a.createElement("option",{value:e._id},e.name)}))),t=r.a.createElement("select",{className:"form-control",name:"game",onChange:this.handleGameChange,required:!0},r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Choose a Game"),this.state.games.map((function(e){return r.a.createElement("option",{value:e._id},e.name)})))),"game"===this.state.mode&&(e=r.a.createElement("select",{className:"form-control",name:"customer",required:!0},r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Choose a Customer"),this.state.customers.map((function(e){return r.a.createElement("option",{value:e._id},e.name)}))),t=r.a.createElement("select",{className:"form-control",name:"game",disabled:!0},this.state.games.map((function(e){return r.a.createElement("option",{value:e._id},e.name)})))),"dashboard"===this.state.mode&&(e=r.a.createElement("select",{className:"form-control",name:"customer",required:!0},r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Choose a Customer"),this.state.customers.map((function(e){return r.a.createElement("option",{value:e._id},e.name)}))),t=r.a.createElement("select",{className:"form-control",name:"game",onChange:this.handleGameChange,required:!0},r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Choose a Game"),this.state.games.map((function(e){return r.a.createElement("option",{value:e._id},e.name)})))),r.a.createElement("div",null,this.renderRedirect(),r.a.createElement("form",{onSubmit:this.confirmIssue},r.a.createElement("label",null,"Customer Name"),e,r.a.createElement("label",null,"Game"),t,r.a.createElement("label",null,"Console"),a,r.a.createElement("input",{type:"submit",value:"Issue OTP",className:"btn btn-primary"})),r.a.createElement(M.a,{show:this.state.modal_show},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Title,null,"Game Issue")),r.a.createElement("form",{onSubmit:this.handleForm},r.a.createElement(M.a.Body,null,this.state.button_disable?r.a.createElement("p",null,"Fill in Details"):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Enter OTP"),r.a.createElement("input",{type:"number",name:"otp"}),this.state.otp_issued?r.a.createElement(D.a,null,r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"OTP")),r.a.createElement(D.a.Body,null,this.state.message)):r.a.createElement(O,null))),r.a.createElement(M.a.Footer,null,r.a.createElement(P.a,{variant:"secondary",onClick:this.modalClose},"Close"),r.a.createElement(P.a,{variant:"primary",type:"submit",disabled:this.state.button_disable},this.state.verifying?r.a.createElement(O,null):"Verify")))))}return r.a.createElement("div",null,"Can't Issue game")}}]),a}(n.Component),Z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){n.setState({redirect_to_transaction:!0})},n.renderRedirect=function(){if(n.state.redirect_to_transaction)return r.a.createElement(h.a,{push:!0,to:"/transaction/"+n.state.transactionid})},console.log(e.match.params.id),"customer"===e.match.params.mode?n.state={mode:"customer",id:e.match.params.id,filtered:[],modal_show:!1,ascendingCustomerName:!0,ascendingGameName:!0,ascendingDateIssue:!0,customerNameSortButtonValue:"Sort",gameNameSortButtonValue:"Sort",dateIssueButtonValue:r.a.createElement("span",null,"\u2193"),otp_issued:!1,verifying:!1,games_to_return_loaded:!1}:n.state={mode:"dashboard",id:"all",filtered:[],modal_show:!1,ascendingCustomerName:!0,ascendingGameName:!0,ascendingDateIssue:!0,customerNameSortButtonValue:"Sort",gameNameSortButtonValue:"Sort",dateIssueButtonValue:r.a.createElement("span",null,"\u2193"),otp_issued:!1,verifying:!1,games_to_return_loaded:!1},n.handleClick=n.handleClick.bind(Object(m.a)(n)),n.confirmReturn=n.confirmReturn.bind(Object(m.a)(n)),n.modalClose=n.modalClose.bind(Object(m.a)(n)),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.onClickForSort=n.onClickForSort.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCustomerDetail()}},{key:"componentDidUpdate",value:function(){var e=this;console.log(this.state.mode,this.props.match.params.mode),this.state.mode!==this.props.match.params.mode&&this.setState({mode:this.props.match.params.mode,id:this.props.match.params.id},(function(){e.getCustomerDetail()}))}},{key:"confirmReturn",value:function(e){var t=this;console.log(e.target.id),this.setState({otp_issued:!1,verifying:!1});var a=e.target.id.split(" ");S.a.get("https://prayuj-gamerent.herokuapp.com/customer/generate_otp/id="+a[3]+"&mode=Returning&game="+a[1]+"&console="+a[4]).then((function(e){console.log(e.data),t.setState({message:e.data.message,otp_issued:!0})})),this.setState({modal_show:!0,ids:a})}},{key:"modalClose",value:function(){this.setState({modal_show:!1})}},{key:"getCustomerDetail",value:function(){var e=this;S.a.get("https://prayuj-gamerent.herokuapp.com/customer/return/"+this.state.id).then((function(t){console.log(t.data),e.setState({games_to_return:t.data,filtered:t.data,show:!0,games_to_return_loaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){console.log(e.target.value);var t=[],a=[];if(""!==e.target.value){var n,r=[];r=(t=this.state.games_to_return).filter((function(t){var a=t.gameInfo.name.toLowerCase(),n=e.target.value.toLowerCase();return a.includes(n)})),n=t.filter((function(t){var a=t.customerInfo.name.toLowerCase(),n=e.target.value.toLowerCase();return a.includes(n)})),a=r.concat(n)}else a=this.state.filtered;console.log(a),this.setState({filtered:a})}},{key:"convertDate",value:function(e){var t=new Date(e);return String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear()+" ("+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+" hrs)"}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),console.log(e.target.otp.value),this.setState({verifying:!0});var a=this.state.ids;S.a.post("https://prayuj-gamerent.herokuapp.com/customer/verify_otp/"+a[3],{otp:e.target.otp.value}).then((function(e){console.log(e.data.isVerify),e.data.isVerify?S.a.post("https://prayuj-gamerent.herokuapp.com/customer/return/",{transaction_id:a[0],game_id:a[1],item_id:a[2]}).then((function(e){console.log(e.data),t.getCustomerDetail(),t.setState({modal_show:!1,transactionid:a[0]}),t.setRedirect()})).catch((function(e){return console.log(e)})):(t.setState({verifying:!1}),alert("Incorrect OTP, Issue again"))}))}},{key:"onClickForSort",value:function(e){var t=this;if("Customer Name"===e.target.value){var a=this.state.filtered;a.sort((function(e,a){var n=e.customerInfo.name.toLowerCase(),r=a.customerInfo.name.toLowerCase();return t.state.ascendingCustomerName?n<r?1:n>r?-1:0:t.state.ascendingCustomerName?void 0:n<r?-1:n>r?1:0})),console.log(a);var n=this.state.ascendingCustomerName?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:a,ascendingCustomerName:!this.state.ascendingCustomerName,customerNameSortButtonValue:n,gameNameSortButtonValue:"Sort",dateIssueButtonValue:"Sort"})}if("Game Name"===e.target.value){var s=this.state.filtered;s.sort((function(e,a){var n=e.gameInfo.name.toLowerCase(),r=a.gameInfo.name.toLowerCase();return t.state.ascendingGameName?n<r?1:n>r?-1:0:t.state.ascendingGameName?void 0:n<r?-1:n>r?1:0})),console.log(s);var l=this.state.ascendingGameName?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:s,ascendingGameName:!this.state.ascendingGameName,gameNameSortButtonValue:l,customerNameSortButtonValue:"Sort",dateIssueButtonValue:"Sort"})}if("Date Issue"===e.target.value){var o=this.state.filtered;o.sort((function(e,a){var n=e.date_issue,r=a.date_issue;return t.state.ascendingDateIssue?n<r?1:n>r?-1:0:t.state.ascendingDateIssue?void 0:n<r?-1:n>r?1:0}));var i=this.state.ascendingDateIssue?r.a.createElement("span",null,"\u2193"):r.a.createElement("span",null,"\u2191");this.setState({filtered:o,ascendingDateIssue:!this.state.ascendingDateIssue,dateIssueButtonValue:i,customerNameSortButtonValue:"Sort",gameNameSortButtonValue:"Sort"})}}},{key:"render",value:function(){var e=this,t=this.state.filtered.length>0?this.state.filtered.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.customerInfo.name),r.a.createElement("td",null,t.gameInfo.name),r.a.createElement("td",null,t.gameInfo.items.console),r.a.createElement("td",null,t.gameInfo.items.serial_no),r.a.createElement("td",null,e.convertDate(t.date_issue)),r.a.createElement("input",{type:"button",value:"Return",className:"btn btn-primary",onClick:e.confirmReturn,id:t._id+" "+t.game_id+" "+t.item_id+" "+t.customer_id+" "+t.gameInfo.items.console}))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"7",style:{position:"relative",top:"50%",left:"50%"}},"Nothing to Show!"));return r.a.createElement("div",null,this.renderRedirect(),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search...",onChange:this.handleChange}),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr"),r.a.createElement("th",null,"Customer Name",r.a.createElement("button",{className:"btn btn-primary",value:"Customer Name",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.customerNameSortButtonValue)),r.a.createElement("th",null,"Game Name",r.a.createElement("button",{className:"btn btn-primary",value:"Game Name",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.gameNameSortButtonValue)),r.a.createElement("th",null,"Console"),r.a.createElement("th",null,"Serial No"),r.a.createElement("th",null,"Issued",r.a.createElement("button",{className:"btn btn-primary",value:"Date Issue",onClick:this.onClickForSort,style:{"margin-left":"5%"}},this.state.dateIssueButtonValue)),r.a.createElement("th",null,"Return"))),r.a.createElement("tbody",null,this.state.games_to_return_loaded?t:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"7",style:{position:"relative",top:"50%",left:"50%"}},r.a.createElement(O,null)))),r.a.createElement(M.a,{show:this.state.modal_show},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Title,null,"Game Return")),r.a.createElement("form",{onSubmit:this.handleClick},r.a.createElement(M.a.Body,null,r.a.createElement("div",null,"Enter OTP",r.a.createElement("input",{type:"number",name:"otp"})),this.state.otp_issued?r.a.createElement(D.a,null,r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"OTP")),r.a.createElement(D.a.Body,null,this.state.message)):r.a.createElement(O,null)),r.a.createElement(M.a.Footer,null,r.a.createElement(P.a,{variant:"secondary",onClick:this.modalClose},"Close"),r.a.createElement(P.a,{variant:"primary",type:"submit"},this.state.verifying?r.a.createElement(O,null):"Verify")))))))}}]),a}(n.Component),Q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",null,"Page Not Found")}}]),a}(n.Component),$=(a(189),a(43)),ee=a.n($),te=a(26),ae=a.n(te),ne=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var r=!1;localStorage.getItem("isLoggedIn")&&(r=!0);var s=window.location.pathname;return s.match(/^\/customer/)||"/add_customer/"===s||s.match(/^\/update_customer/)?(console.log("1"),n.state={active:"customers",showNavbar:r}):s.match(/^\/game/)||"/add_game/"===s||s.match(/^\/update_game/)?(console.log("2"),n.state={active:"games",showNavbar:r}):s.match(/^\/transaction/)?(console.log("3"),n.state={active:"transactions",showNavbar:r}):s.match(/^\/issue/)?(console.log("4"),n.state={active:"issue",showNavbar:r}):s.match(/^\/return/)?(console.log("5"),n.state={active:"return",showNavbar:r}):(console.log("6"),n.state={active:"dashboard",showNavbar:r}),n.state.expanded=!1,n.onCickHandler=n.onCickHandler.bind(Object(m.a)(n)),n.handleLogout=n.handleLogout.bind(Object(m.a)(n)),n.handleLoginInApp=n.handleLoginInApp.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log(window.location.pathname)}},{key:"componentDidUpdate",value:function(){console.log(window.location.pathname)}},{key:"onCickHandler",value:function(e){console.log(e.target),"Home"===e.target.id?this.setState({active:"dashboard"}):"Customers"===e.target.id?this.setState({active:"customers"}):"Games"===e.target.id?this.setState({active:"games"}):"Transactions"===e.target.id?this.setState({active:"transactions"}):"Issue"===e.target.id?this.setState({active:"issue"}):"Return"===e.target.id&&this.setState({active:"return"})}},{key:"handleLogout",value:function(){localStorage.removeItem("isLoggedIn"),this.setState({showNavbar:!1})}},{key:"handleLoginInApp",value:function(){this.setState({showNavbar:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(d.a,{basename:"/"},this.state.showNavbar?r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{expand:"lg",variant:"dark",onSelect:function(t){e.setState({expanded:!1,active:t})},expanded:this.state.expanded},r.a.createElement(ee.a.Toggle,{"aria-controls":"responsive-navbar-nav",onClick:function(){return e.setState({expanded:!e.state.expanded})}}),r.a.createElement(ee.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(ae.a,{className:"mr-auto"},r.a.createElement(ae.a.Link,{as:d.b,to:"/",eventKey:"dashboard",active:"dashboard"===this.state.active},"Dashboard"),r.a.createElement(ae.a.Link,{to:"/customers",as:d.b,eventKey:"customers",active:"customers"===this.state.active},"Customers"),r.a.createElement(ae.a.Link,{as:d.b,to:"/games",eventKey:"games",active:"games"===this.state.active},"Games"),r.a.createElement(ae.a.Link,{to:"/transactions",as:d.b,eventKey:"transactions",active:"transactions"===this.state.active},"Transactions"),r.a.createElement(ae.a.Link,{to:"/issue/mode=dashboard&id=0",as:d.b,eventKey:"issue",active:"issue"===this.state.active},"Issue"),r.a.createElement(ae.a.Link,{to:"/return/mode=dashboard&id=all",as:d.b,eventKey:"return",active:"return"===this.state.active},"Return")),r.a.createElement(ae.a,null,r.a.createElement(ae.a.Link,{onClick:this.handleLogout,eventKey:"logout"},"Logout"))))):r.a.createElement(j,{onSubmit:this.handleLoginInApp}),r.a.createElement(h.d,null,r.a.createElement(p,{path:"/",exact:!0,component:w}),r.a.createElement(h.b,{path:"/login",render:function(){if(e.state.showNavbar)return r.a.createElement(h.a,{to:"/"});console.log("Hello")}}),r.a.createElement(p,{path:"/customers",component:B}),r.a.createElement(p,{path:"/games",component:R}),r.a.createElement(p,{path:"/transactions",component:V}),r.a.createElement(p,{path:"/game/:id",component:A}),r.a.createElement(p,{path:"/customer/:id",component:x}),r.a.createElement(p,{path:"/transaction/:id",component:J}),r.a.createElement(p,{path:"/add_game",component:H}),r.a.createElement(p,{path:"/add_customer",component:Y}),r.a.createElement(p,{path:"/update_customer/:id",component:U}),r.a.createElement(p,{path:"/update_game/:id",component:W}),r.a.createElement(p,{path:"/add_plan/:id",component:q}),r.a.createElement(p,{path:"/issue/mode=:mode&id=:id",component:K}),r.a.createElement(p,{path:"/return/mode=:mode&id=:id",component:Z}),r.a.createElement(p,{component:Q})))}}]),a}(n.Component);l.a.render(r.a.createElement(ne,null),document.getElementById("root"))}},[[102,1,2]]]);
//# sourceMappingURL=main.b1b1fbb0.chunk.js.map